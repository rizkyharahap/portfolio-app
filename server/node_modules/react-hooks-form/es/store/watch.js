(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports);
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports);
    global.watch = mod.exports;
  }
})(this, function (_exports) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.default = createListeners;

  function createListeners() {
    var listeners = {};
    return {
      notifyWatchers: function notifyWatchers(name, payload) {
        if (name in listeners && listeners[name].length > 0) {
          for (var i = 0; i < listeners[name].length; i++) {
            listeners[name][i](payload);
          }
        }
      },
      watch: function watch(name, listener) {
        if (!(name in listeners)) {
          listeners[name] = [];
        }

        if (typeof listener !== 'function') {
          throw new Error('Expected listener to be a function.');
        }

        listeners[name].push(listener);
        return function () {
          listeners[name].splice(listeners[name].indexOf(listener), 1);
        };
      }
    };
  }
});